# History

Операция history показывает историю определённого ресурса, всех ресурсов заданного типа или всех ресурсов, поддерживаемых системой. Все эти три варианта операции history выполняются с помощью HTTP-команды GET:

```javascript
GET /fhir/<RESOURCE_TYPE>/<ID>/_history{?[parameters]&_format=[mime-type]}
GET /fhir/<RESOURCE_TYPE>/_history{?[parameters]&_format=[mime-type]}
GET /fhir/_history{?[parameters]&_format=[mime-type]}
```

Результатом выполнения операции \_history будет Bundle с типом history, содержащий все версии ресурса, отсортированные в обратном хронологическому порядке, включая удаленные ресурсы. Каждая запись будет содержать как минимум один из следующх элементов:

resource - с самим ресурсом

или request с указанием  entry.request.method

request содержит информацию о результате операции, которая привела к созданию новой версии ресурса и позволяет, к примеру, системе-подписчику различать созданные ресурсы и обновления от существующих ресурсов. Главная причина, почему элемент resource может отсутствовать, это то, что ресурс был изменён неким другим каналом, а не через RESTful интерфейс. Если в  entry.request.method указан метод PUT или POST, то такая запись обязательно будет иметь элемент resource.

Операции create, update, delete создают записи в истории. Другие операции - нет \(отметьте, что эти операции могут давать побочные эффекты, например в виде ресурсов AuditEvent; это будет само по себе отражаться для них как операции create\). Новые ресурсы или обновления существующих ресурсов, полученные в результате выполенния операций, также появятся в истории, как и обновления ресурсов, которые являются результатами операций, находящихся вне области действия RESTful интерфейса.

Также можно использовать запрос HEAD.

Операция create отображается в истории следующим образом:

```yaml
resourceType: Bundle
type: history
total: 1
entry:
- resource:
    birthDate: '2000-05-06'
    id: 9dec14f6-4e49-4649-bd3b-49f9960d2ae1
    resourceType: Patient
    meta:
      lastUpdated: '2018-11-12T11:17:08.229Z'
      versionId: '23'
      tag:
      - system: https://aidbox.app
        code: created
  request:
    method: POST
    url: Patient
```

Операция delete отображается в истории следующим образом:

```yaml
resourceType: Bundle
type: 
```



